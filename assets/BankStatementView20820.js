import{D as P}from"./Dashboard20820.js";import{o as T,F as B,c as U,a as z,m as c,l as K,_ as S,r as p,p as O,b as _,e as k,f as l,w as d,g as y,q as V,h as R,s as x,v as D,n as C}from"../index20820.js";import{u as N}from"./policy20820.js";import{e as A}from"./helpers20820.js";import{u as E}from"./sidebar20820.js";import"./toast20820.js";const $={setup(){T(()=>{u.value=!0,o.value={first:0,rows:w.value.rows,sortField:null,sortOrder:null,filters:s.value},B.register("myfilter",(a,M)=>a===M),e()});const m=N();E();const i=U(()=>m.response_policies),b=U(()=>m.policyRoles),n=z(),w=c(),g=c(),s=c({global:{value:null,matchMode:"contains"},full_name:{value:"",matchMode:"contains"},tax_code:{value:"",matchMode:"contains"},company_name:{value:"",matchMode:"contains"},enabled:{value:"",matchMode:"contains"},role:{value:"",matchMode:"contains"}}),u=c(!0),o=c(),f=c(0),v=c([{label:"Attivo",value:"true"},{label:"Disattivo",value:"false"}]),F=c([{label:"Utente",value:"policy"},{label:"Admin",value:"admin"}]),h=c([{label:"My Filter",value:"myfilter"}]);function e(){u.value=!0;const a=new Map;a.set("company_name",s.value.company_name.value),a.set("tax_code",s.value.tax_code.value),a.set("full_name",s.value.full_name.value),a.set("enabled",s.value.enabled.value),a.set("role",s.value.role.value),a.set("page",o.value.page+1),a.set("per_page",o.value.rows),o.value.sortField&&(o.value.sortOrder==1?a.set("sorted_by",o.value.sortField+"_asc"):a.set("sorted_by",o.value.sortField+"_desc")),setTimeout(()=>{r(a)},Math.random()*1e3+250)}const r=async function(a){await m.fetchAllPolicys(a).then(()=>{u.value=!1}).catch(M=>{u.value=!1,A(n,M)})};return{dt:w,responsePolicies:i,filters:s,loading:u,totalRecords:f,lazyParams:o,matchModes:h,policyRoles:b,status:v,roles:F,currentPolicy:g,onPage:a=>{o.value=a,e()},onSort:a=>{o.value=a,e()},onFilter:()=>{o.value.page=0,o.value.filters=s.value,e()},loadLazyData:e,goToDetail:function(a){K.push({name:"partner-detail",params:{id:"234234",policy_id:a}})}}},components:{}};const L={class:"flex justify-content-between align-items-center"},I={class:"p-input-icon-left w-full mr-3 py-2"},j=y("i",{class:"pi pi-search"},null,-1);function q(m,i,b,n,w,g){const s=p("InputText"),u=p("Button"),o=p("Column"),f=p("Dropdown"),v=p("Badge"),F=p("DataTable"),h=O("tooltip");return _(),k("div",null,[l(F,{value:n.responsePolicies.policies,totalRecords:n.responsePolicies.total,lazy:!0,paginator:!0,rows:50,filters:n.filters,"onUpdate:filters":i[1]||(i[1]=e=>n.filters=e),ref:"dt",dataKey:"id",loading:n.loading,onPage:i[2]||(i[2]=e=>n.onPage(e)),onSort:i[3]||(i[3]=e=>n.onSort(e)),onFilter:i[4]||(i[4]=e=>n.onFilter()),filterDisplay:"row",removableSort:"",stripedRows:""},{header:d(()=>[y("div",L,[y("span",I,[j,l(s,{modelValue:n.filters.global.value,"onUpdate:modelValue":i[0]||(i[0]=e=>n.filters.global.value=e),placeholder:"Ricerca polizza",class:"border-none w-full"},null,8,["modelValue"])]),y("div",null,[V(l(u,{icon:"pi pi-download",text:"",rounded:"","aria-label":"Dowload",size:"large"},null,512),[[h,"Scarica",void 0,{top:!0}]])])])]),empty:d(()=>[R(" Nessun estratto conto trovato. ")]),default:d(()=>[l(o,{field:"company_name",header:"N. proposta",filterMatchMode:"contains",ref:"company_name",sortable:!1,showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:d(({filterModel:e,filterCallback:r})=>[l(s,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:x(t=>r(),["enter"]),class:"p-column-filter",placeholder:"Filtra"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1},512),l(o,{field:"full_name",header:"N. finanziamento",filterMatchMode:"contains",ref:"full_name",sortable:!1,showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:d(({filterModel:e,filterCallback:r})=>[l(s,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:x(t=>r(),["enter"]),class:"p-column-filter",placeholder:"Filtra"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1},512),l(o,{field:"tax_code",header:"Codice fiscale",filterMatchMode:"contains",ref:"tax_code",sortable:!1,showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:d(({filterModel:e,filterCallback:r})=>[l(s,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:x(t=>r(),["enter"]),class:"p-column-filter",placeholder:"Filtra"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1},512),l(o,{header:"Compagnia",filterMatchMode:"contains",ref:"role",field:"role",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:d(({filterModel:e,filterCallback:r})=>[l(f,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,options:n.roles,optionValue:"value",optionLabel:"label",onChange:t=>r(),placeholder:"Filtra"},null,8,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1},512),l(o,{header:"Tipologia",filterMatchMode:"contains",ref:"role",field:"role",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:d(({filterModel:e,filterCallback:r})=>[l(f,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,options:n.roles,optionValue:"value",optionLabel:"label",onChange:t=>r(),placeholder:"Filtra"},null,8,["modelValue","onUpdate:modelValue","options","onChange"])]),body:d(({data:e})=>[e.role=="policy"?(_(),D(v,{key:0,value:"Utente",class:C(["px-4",e.role])},null,8,["class"])):e.role=="admin"?(_(),D(v,{key:1,value:"Admin",class:C(["px-4",e.role])},null,8,["class"])):(_(),D(v,{key:2,value:e.role,class:C(["px-4",e.role])},null,8,["value","class"]))]),_:1},512),l(o,{header:"Premio",field:"price"}),l(o,{header:"Data decorrenza",field:"date"}),l(o,{header:"Esito",filterMatchMode:"contains",ref:"enabled",field:"enabled",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:d(({filterModel:e,filterCallback:r})=>[l(f,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,options:n.status,optionValue:"value",optionLabel:"label",onChange:t=>r(),placeholder:"Filtra"},null,8,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1},512),l(o,{header:"",style:{width:"8rem"}},{body:d(({data:e})=>[V(l(u,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",class:"mr-3",icon:"pi download-file-icon",text:"",rounded:""},null,512),[[h,"Edit",void 0,{top:!0}]]),V(l(u,{type:"button",onClick:r=>n.goToDetail(e.id),"aria-haspopup":"true","aria-controls":"overlay_menu",class:"mr-0",icon:"pi pi-arrow-right",text:"",rounded:""},null,8,["onClick"]),[[h,"Edit",void 0,{top:!0}]])]),_:1})]),_:1},8,["value","totalRecords","filters","loading"])])}const G=S($,[["render",q]]),H={setup(){return{}},components:{Dashboard:P,BankStatementTable:G}},J=y("h1",null,"Estratto conto",-1);function Q(m,i,b,n,w,g){const s=p("Dashboard");return _(),k("div",null,[J,l(s,{route:"bank-statement-details"})])}const ne=S(H,[["render",Q]]);export{ne as default};
