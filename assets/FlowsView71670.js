import{d as x,u as M,s as g,r as E,o as K,a as b,c as j,w as n,b as v,e as o,t as p,f as r,g as I,n as P,h as U,i as t,j as $,T as O,k as W,R as Q}from"../index71670.js";import{u as q,T as y,_ as A,s as G}from"./LazyDataTable.vue_vue_type_script_setup_true_lang71670.js";import{s as H}from"./index71670.js";import{u as k}from"./flow71670.js";import"./index716702.js";const J={class:"flex items-center gap-x-2"},X={class:"flex items-center justify-center"},F=10,Y=x({__name:"FlowsTable",setup(S){const i=M(),a=k(),{flows:f,totalFlows:m}=g(a),{onSort:c,onPage:T,loadLazyData:V,isLoading:z,onFilter:B}=q({rows:F},N),u=E({id:{value:"",matchMode:y.EQ},code:{value:"",matchMode:y.LIKE}});function C(){B(u.value)}const D=function(l){return{path:`${i.path}/${l}`}};async function N(l){try{await a.fetchFlows(l)}catch(s){console.error(s)}}return K(()=>{V()}),(l,s)=>{const R=H,_=$,w=G,L=O;return b(),j(A,{value:t(f),loading:t(z),rows:F,"total-records":t(m),onSort:t(c),onPage:t(T),onFilter:C,filters:u.value,"onUpdate:filters":s[0]||(s[0]=e=>u.value=e),"data-key":"id",scrollable:""},{empty:n(()=>s[1]||(s[1]=[v("Non ci sono flussi")])),default:n(()=>[o(w,{header:"Codice",field:"code",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{body:n(({data:e})=>[v(" Flusso "+p(e.code),1)]),filter:n(({filterModel:e,filterCallback:h})=>[r("div",J,[o(R,{class:"w-[200px]",modelValue:e.value,"onUpdate:modelValue":d=>e.value=d,fluid:"",type:"text",placeholder:"Filtra",onKeydown:I(d=>h(),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),o(_,{class:P(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:d=>{e.value="",h()}},null,8,["class","onClick"])])]),_:1}),o(w,{class:"w-[50px]","align-frozen":"right",frozen:""},{body:n(({data:e})=>[r("div",X,[U(o(_,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",icon:"pi pi-arrow-right",text:"",rounded:"",as:"router-link",to:D(e.id)},null,8,["to"]),[[L,"Dettagli",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading","total-records","onSort","onPage","filters"])}}}),Z={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4"},ne=x({__name:"FlowsView",setup(S){const i=k(),{totalFlows:a}=g(i);return(f,m)=>{const c=$;return b(),W("div",null,[r("div",Z,[r("h3",null,p(t(a))+" "+p(t(a)===1?"Flusso":"Flussi"),1),o(c,{label:"Inserisci flusso",as:"router-link",to:{name:t(Q).FLOWS_NEW},variant:"outlined",severity:"contrast",rounded:"",size:"small"},null,8,["to"])]),o(Y)])}}});export{ne as default};
