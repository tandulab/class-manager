import{_ as v,r as s,b as _,v as x,w as m,h as V,g as e,f as a,e as y,m as g,y as R,z as E,a as A,p as M,i as z,x as U,A as L,B as w,q as j,d as G,C as H,o as O,D as Q,c as Z,l as W}from"../index45317.js";import{u as J}from"./policy45317.js";import{c as K,a as X,F as Y}from"./vee-validate.esm45317.js";import{I as ee}from"./InputTextWithValidation45317.js";import{s as k}from"./toast45317.js";import{f as te,g as oe,s as N,h as F,e as B}from"./helpers45317.js";const le={props:["tmp_policy"]},ae={class:"formgrid grid mt-3"},ne={class:"field col-3"},ie=e("label",{for:"first_name"},"Nome",-1),se={class:"field col-3"},ce=e("label",{for:"last_name"},"Cognome",-1),de={class:"field col-3"},me=e("label",{for:"name"},"Sesso",-1),re={class:"field col-3"},_e=e("label",{for:"birthday"},"Data di nascita",-1),ue={class:"formgrid grid mt-3"},pe={class:"field col-3"},fe=e("label",{for:"country"},"Paese di nascita",-1),ye={class:"field col-3"},he=e("label",{for:"province"},"Provincia di nascita",-1),ve={class:"field col-3"},be=e("label",{for:"city"},"Città di nascita",-1),ge={class:"field col-3"},Ve=e("label",{for:"tax_code"},"Codice fiscale",-1),xe={class:"formgrid grid mt-3"},Ce={class:"field col-3"},$e=e("label",{for:"email"},"Email",-1),we={class:"field col-3"},De=e("label",{for:"mobile_phone"},"Cellulare",-1),Te={class:"field col-3"},Ie=e("label",{for:"phone"},"Telefono",-1);function Ue(p,o,t,n,f,u){const i=s("InputText"),c=s("Dropdown"),d=s("Calendar"),r=s("Card");return _(),x(r,{class:"custom-card-form"},{title:m(()=>[V(" Contatti ")]),content:m(()=>[e("div",ae,[e("div",ne,[ie,a(i,{id:"first_name",type:"text",modelValue:t.tmp_policy.first_name,"onUpdate:modelValue":o[0]||(o[0]=l=>t.tmp_policy.first_name=l),class:"w-full",disabled:""},null,8,["modelValue"])]),e("div",se,[ce,a(i,{id:"last_name",type:"text",modelValue:t.tmp_policy.last_name,"onUpdate:modelValue":o[1]||(o[1]=l=>t.tmp_policy.last_name=l),class:"w-full",disabled:""},null,8,["modelValue"])]),e("div",de,[me,a(c,{modelValue:t.tmp_policy.gender,"onUpdate:modelValue":o[2]||(o[2]=l=>t.tmp_policy.gender=l),options:[],optionLabel:"name",optionValue:"value",class:"w-full"},null,8,["modelValue"])]),e("div",re,[_e,a(d,{inputId:"dateformat",modelValue:t.tmp_policy.birthday,"onUpdate:modelValue":o[3]||(o[3]=l=>t.tmp_policy.birthday=l),dateFormat:"dd/mm/yy",manualInput:!1,placeholder:"gg/mm/aaaa",id:"birthday"},null,8,["modelValue"])])]),e("div",ue,[e("div",pe,[fe,a(c,{modelValue:t.tmp_policy.country,"onUpdate:modelValue":o[4]||(o[4]=l=>t.tmp_policy.country=l),options:[],optionLabel:"country",optionValue:"value",class:"w-full"},null,8,["modelValue"])]),e("div",ye,[he,a(c,{modelValue:t.tmp_policy.province,"onUpdate:modelValue":o[5]||(o[5]=l=>t.tmp_policy.province=l),options:[],optionLabel:"province",optionValue:"value",class:"w-full"},null,8,["modelValue"])]),e("div",ve,[be,a(c,{modelValue:t.tmp_policy.city,"onUpdate:modelValue":o[6]||(o[6]=l=>t.tmp_policy.city=l),options:[],optionLabel:"city",optionValue:"value",class:"w-full"},null,8,["modelValue"])]),e("div",ge,[Ve,a(i,{id:"tax_code",type:"text",modelValue:t.tmp_policy.tax_code,"onUpdate:modelValue":o[7]||(o[7]=l=>t.tmp_policy.tax_code=l),class:"w-full",disabled:""},null,8,["modelValue"])])]),e("div",xe,[e("div",Ce,[$e,a(i,{id:"email",type:"text",modelValue:t.tmp_policy.email,"onUpdate:modelValue":o[8]||(o[8]=l=>t.tmp_policy.email=l),class:"w-full"},null,8,["modelValue"])]),e("div",we,[De,a(i,{id:"mobile_phone",type:"text",modelValue:t.tmp_policy.mobile_phone,"onUpdate:modelValue":o[9]||(o[9]=l=>t.tmp_policy.mobile_phone=l),class:"w-full"},null,8,["modelValue"])]),e("div",Te,[Ie,a(i,{id:"phone",type:"text",modelValue:t.tmp_policy.phone,"onUpdate:modelValue":o[10]||(o[10]=l=>t.tmp_policy.phone=l),class:"w-full"},null,8,["modelValue"])])])]),_:1})}const Se=v(le,[["render",Ue]]),ze={props:["tmp_policy"]},ke={class:"formgrid grid mt-3"},Fe={class:"field col-6"},Pe=e("label",{for:"first_name"},"Indirizzo",-1),Le={class:"field col-3"},Ae=e("label",{for:"street_number"},"Numero civico",-1),Ne={class:"field col-3"},Be=e("label",{for:"country"},"Provincia",-1),qe={class:"formgrid grid mt-3"},Re={class:"field col-3"},Ee=e("label",{for:"city"},"Città",-1),Me={class:"field col-3"},je=e("label",{for:"cap"},"CAP",-1);function Ge(p,o,t,n,f,u){const i=s("InputText"),c=s("Dropdown"),d=s("Card");return _(),x(d,{class:"custom-card-form"},{title:m(()=>[V(" Residenza ")]),content:m(()=>[e("div",ke,[e("div",Fe,[Pe,a(i,{id:"address",type:"text",modelValue:t.tmp_policy.address,"onUpdate:modelValue":o[0]||(o[0]=r=>t.tmp_policy.address=r),class:"w-full",disabled:""},null,8,["modelValue"])]),e("div",Le,[Ae,a(i,{id:"street_number",type:"text",modelValue:t.tmp_policy.street_number,"onUpdate:modelValue":o[1]||(o[1]=r=>t.tmp_policy.street_number=r),class:"w-full",disabled:""},null,8,["modelValue"])]),e("div",Ne,[Be,a(c,{modelValue:t.tmp_policy.country,"onUpdate:modelValue":o[2]||(o[2]=r=>t.tmp_policy.country=r),options:[],optionLabel:"country",optionValue:"value",class:"w-full"},null,8,["modelValue"])])]),e("div",qe,[e("div",Re,[Ee,a(c,{modelValue:t.tmp_policy.city,"onUpdate:modelValue":o[3]||(o[3]=r=>t.tmp_policy.city=r),options:[],optionLabel:"city",optionValue:"value",class:"w-full"},null,8,["modelValue"])]),e("div",Me,[je,a(i,{id:"cap",type:"text",modelValue:t.tmp_policy.cap,"onUpdate:modelValue":o[4]||(o[4]=r=>t.tmp_policy.cap=r),class:"w-full",disabled:""},null,8,["modelValue"])])])]),_:1})}const He=v(ze,[["render",Ge]]),Oe={props:["tmp_policy"]},Qe={class:"formgrid grid mt-3"},Ze={class:"field col-3"},We=e("label",{for:"type"},"Tipo",-1),Je={class:"field col-3"},Ke=e("label",{for:"number"},"Numero",-1),Xe={class:"field col-3"},Ye=e("label",{for:"issued_by"},"Rilasciato da",-1),et={class:"field col-3"},tt=e("label",{for:"place"},"Luogo di rilascio",-1),ot={class:"formgrid grid mt-3"},lt={class:"field col-3"},at=e("label",{for:"release_date"},"Data di rilascio",-1),nt={class:"field col-3"},it=e("label",{for:"expired_date"},"Data di scadenza",-1);function st(p,o,t,n,f,u){const i=s("Dropdown"),c=s("InputText"),d=s("Calendar"),r=s("Card");return _(),x(r,{class:"custom-card-form"},{title:m(()=>[V(" Documento d'identità ")]),content:m(()=>[e("div",Qe,[e("div",Ze,[We,a(i,{modelValue:t.tmp_policy.type,"onUpdate:modelValue":o[0]||(o[0]=l=>t.tmp_policy.type=l),options:[],optionLabel:"type",optionValue:"value",class:"w-full"},null,8,["modelValue"])]),e("div",Je,[Ke,a(c,{id:"number",type:"text",modelValue:t.tmp_policy.number,"onUpdate:modelValue":o[1]||(o[1]=l=>t.tmp_policy.number=l),class:"w-full"},null,8,["modelValue"])]),e("div",Xe,[Ye,a(i,{modelValue:t.tmp_policy.issued_by,"onUpdate:modelValue":o[2]||(o[2]=l=>t.tmp_policy.issued_by=l),options:[],optionLabel:"issued_by",optionValue:"value",class:"w-full"},null,8,["modelValue"])]),e("div",et,[tt,a(c,{id:"place",type:"text",modelValue:t.tmp_policy.place,"onUpdate:modelValue":o[3]||(o[3]=l=>t.tmp_policy.place=l),class:"w-full"},null,8,["modelValue"])])]),e("div",ot,[e("div",lt,[at,a(d,{inputId:"dateformat",modelValue:t.tmp_policy.release_date,"onUpdate:modelValue":o[4]||(o[4]=l=>t.tmp_policy.release_date=l),dateFormat:"dd/mm/yy",manualInput:!1,placeholder:"gg/mm/aaaa",id:"release_date"},null,8,["modelValue"])]),e("div",nt,[it,a(d,{inputId:"dateformat",modelValue:t.tmp_policy.expired_date,"onUpdate:modelValue":o[5]||(o[5]=l=>t.tmp_policy.expired_date=l),dateFormat:"dd/mm/yy",manualInput:!1,placeholder:"gg/mm/aaaa",id:"expired_date"},null,8,["modelValue"])])])]),_:1})}const ct=v(Oe,[["render",st]]),dt={props:["tmp_policy"],components:{InsuredContactCard:Se,InsuredResidenceCard:He,InsuredDocumentCard:ct}};function mt(p,o,t,n,f,u){const i=s("InsuredContactCard"),c=s("InsuredResidenceCard"),d=s("InsuredDocumentCard");return _(),y("div",null,[a(i,{tmp_policy:t.tmp_policy},null,8,["tmp_policy"]),a(c,{tmp_policy:t.tmp_policy,class:"mt-5"},null,8,["tmp_policy"]),a(d,{tmp_policy:t.tmp_policy,class:"mt-5"},null,8,["tmp_policy"])])}const rt=v(dt,[["render",mt]]),_t={props:["tmp_policy"]},ut={class:"formgrid grid mt-3"},pt={class:"field col-3"},ft=e("label",{for:"first_name"},"Data e ora import",-1),yt={class:"field col-3"},ht=e("label",{for:"last_name"},"Esito",-1),vt={class:"field col-3"},bt=e("label",{for:"name"},"Tipologia (CQS, CQP)",-1),gt={class:"field col-3"},Vt=e("label",{for:"first_name"},"Compagnia",-1),xt={class:"formgrid grid mt-3"},Ct={class:"field col-3"},$t=e("label",{for:"country"},"Numero finanziamento",-1),wt={class:"field col-3"},Dt=e("label",{for:"release_date"},"Data di decorrenza",-1),Tt={class:"field col-3"},It=e("label",{for:"city"},"Durata (mesi)",-1),Ut={class:"field col-3"},St=e("label",{for:"expired_date"},"Data scadenza",-1),zt={class:"formgrid grid mt-3"},kt={class:"field col-3"},Ft=e("label",{for:"email"},"Numero rate",-1),Pt={class:"field col-3"},Lt=e("label",{for:"mobile_phone"},"Importo rata",-1),At={class:"field col-3"},Nt=e("label",{for:"phone"},"Montante",-1),Bt={class:"field col-3"},qt=e("label",{for:"phone"},"T.A.N. (%)",-1),Rt={class:"formgrid grid mt-3"},Et={class:"field col-3"},Mt=e("label",{for:"email"},"Premio",-1);function jt(p,o,t,n,f,u){const i=s("InputText"),c=s("Dropdown"),d=s("Calendar"),r=s("Card");return _(),x(r,{class:"custom-card-form"},{title:m(()=>[V(" Dati polizza ")]),content:m(()=>[e("div",ut,[e("div",pt,[ft,a(i,{id:"first_name",type:"text",class:"w-full",disabled:""})]),e("div",yt,[ht,a(c,{options:[],optionLabel:"name",optionValue:"value",class:"w-full"})]),e("div",vt,[bt,a(c,{modelValue:t.tmp_policy.gender,"onUpdate:modelValue":o[0]||(o[0]=l=>t.tmp_policy.gender=l),options:[],optionLabel:"name",optionValue:"value",class:"w-full"},null,8,["modelValue"])]),e("div",gt,[Vt,a(i,{id:"first_name",type:"text",class:"w-full",disabled:""})])]),e("div",xt,[e("div",Ct,[$t,a(i,{id:"first_name",type:"text",class:"w-full"})]),e("div",wt,[Dt,a(d,{inputId:"dateformat",modelValue:t.tmp_policy.release_date,"onUpdate:modelValue":o[1]||(o[1]=l=>t.tmp_policy.release_date=l),dateFormat:"dd/mm/yy",manualInput:!1,placeholder:"gg/mm/aaaa",id:"release_date"},null,8,["modelValue"])]),e("div",Tt,[It,a(c,{options:[],optionLabel:"city",optionValue:"value",class:"w-full"})]),e("div",Ut,[St,a(d,{inputId:"dateformat",modelValue:t.tmp_policy.expired_date,"onUpdate:modelValue":o[2]||(o[2]=l=>t.tmp_policy.expired_date=l),dateFormat:"dd/mm/yy",manualInput:!1,placeholder:"gg/mm/aaaa",id:"expired_date"},null,8,["modelValue"])])]),e("div",zt,[e("div",kt,[Ft,a(i,{id:"email",type:"text",modelValue:t.tmp_policy.email,"onUpdate:modelValue":o[3]||(o[3]=l=>t.tmp_policy.email=l),class:"w-full",disabled:""},null,8,["modelValue"])]),e("div",Pt,[Lt,a(i,{id:"mobile_phone",type:"text",modelValue:t.tmp_policy.mobile_phone,"onUpdate:modelValue":o[4]||(o[4]=l=>t.tmp_policy.mobile_phone=l),class:"w-full"},null,8,["modelValue"])]),e("div",At,[Nt,a(i,{id:"phone",type:"text",class:"w-full",disabled:""})]),e("div",Bt,[qt,a(i,{id:"phone",type:"text",class:"w-full"})])]),e("div",Rt,[e("div",Et,[Mt,a(i,{type:"text",modelValue:t.tmp_policy.email,"onUpdate:modelValue":o[5]||(o[5]=l=>t.tmp_policy.email=l),class:"w-full"},null,8,["modelValue"])])])]),_:1})}const Gt=v(_t,[["render",jt]]),Ht={props:["tmp_policy"],components:{PolicyDataCard:Gt}};function Ot(p,o,t,n,f,u){const i=s("PolicyDataCard");return _(),y("div",null,[a(i,{tmp_policy:t.tmp_policy},null,8,["tmp_policy"])])}const Qt=v(Ht,[["render",Ot]]),Zt={props:["tmp_policy"]},Wt={class:"formgrid grid mt-3"},Jt={class:"field col-3"},Kt=e("label",{for:"first_name"},"Nome",-1),Xt={class:"field col-3"},Yt=e("label",{for:"last_name"},"Cognome",-1),eo={class:"field col-6"},to=e("label",{for:"name"},"Dati aggiuntivi",-1);function oo(p,o,t,n,f,u){const i=s("InputText"),c=s("Card");return _(),x(c,{class:"custom-card-form"},{title:m(()=>[V(" Medico curante ")]),content:m(()=>[e("div",Wt,[e("div",Jt,[Kt,a(i,{id:"first_name",type:"text",modelValue:t.tmp_policy.first_name,"onUpdate:modelValue":o[0]||(o[0]=d=>t.tmp_policy.first_name=d),class:"w-full",disabled:""},null,8,["modelValue"])]),e("div",Xt,[Yt,a(i,{id:"last_name",type:"text",modelValue:t.tmp_policy.last_name,"onUpdate:modelValue":o[1]||(o[1]=d=>t.tmp_policy.last_name=d),class:"w-full",disabled:""},null,8,["modelValue"])]),e("div",eo,[to,a(i,{id:"last_name",type:"text",modelValue:t.tmp_policy.last_name,"onUpdate:modelValue":o[2]||(o[2]=d=>t.tmp_policy.last_name=d),class:"w-full"},null,8,["modelValue"])])])]),_:1})}const lo=v(Zt,[["render",oo]]),ao={props:["tmp_policy"],components:{DoctorCard:lo}};function no(p,o,t,n,f,u){const i=s("DoctorCard");return _(),y("div",null,[a(i,{tmp_policy:t.tmp_policy},null,8,["tmp_policy"])])}const io=v(ao,[["render",no]]),so={props:["tmp_policy"],setup(p){const o=[{id:"1",question:"Ha subito ricoveri o interventi chirurgici negli ultimi 5 anni e/o è attualmente in attesa di ricovero? (salvo per i seguenti casi: appendicite, ernie addominali/inguinali, adenoidi, tonsille, deviazione del setto nasale, meniscectomia o rottura legamenti del ginocchio, parto senza complicanze, estrazione dentale)",answer:"false"},{id:"2",question:"Ha mai ricevuto una diagnosi, o si è mai sottoposto a ricoveri, interventi, e/o cure per una delle seguenti malattie? - Cancro, tumori, neoplasie, leucemia, linfomi.",answer:"true"}],t=g();return{questions:o,answer:t}}},co={class:"flex align-items-center"},mo={class:"flex align-items-center"};function ro(p,o,t,n,f,u){const i=s("RadioButton"),c=s("Column"),d=s("DataTable"),r=s("Card");return _(),x(r,{class:"custom-card-form"},{title:m(()=>[V(" Domande questionario ")]),content:m(()=>[a(d,{value:n.questions,tableStyle:"min-width: 50rem"},{default:m(()=>[a(c,{field:"yes",header:"Si"},{body:m(({data:l})=>[e("div",co,[a(i,{modelValue:l.answer,"onUpdate:modelValue":h=>l.answer=h,name:l.id,value:"true"},null,8,["modelValue","onUpdate:modelValue","name"])])]),_:1}),a(c,{field:"no",header:"No"},{body:m(({data:l})=>[e("div",mo,[a(i,{modelValue:l.answer,"onUpdate:modelValue":h=>l.answer=h,name:l.id,value:"false"},null,8,["modelValue","onUpdate:modelValue","name"])])]),_:1}),a(c,{field:"question",header:""})]),_:1},8,["value"])]),_:1})}const _o=v(so,[["render",ro]]),uo={props:["tmp_policy"],components:{SurveyCard:_o}};function po(p,o,t,n,f,u){const i=s("SurveyCard");return _(),y("div",null,[a(i,{tmp_policy:t.tmp_policy},null,8,["tmp_policy"])])}const fo=v(uo,[["render",po]]),yo={props:["tmp_policy"],setup(p){const o=[{id:"1",question:"i - l’assicurato dichiara di ii - l’assicurato dichiara di iii - l’assicurato dichiara di - - -",answer:"false"}],t=g();return{declarations:o,answer:t}}},ho={class:"flex align-items-center"};function vo(p,o,t,n,f,u){const i=s("Checkbox"),c=s("Column"),d=s("DataTable"),r=s("Card");return _(),x(r,{class:"custom-card-form"},{title:m(()=>[V(" Dichiarazioni ")]),content:m(()=>[a(d,{value:n.declarations,tableStyle:"min-width: 50rem"},{default:m(()=>[a(c,{field:"yes",header:""},{body:m(({data:l})=>[e("div",ho,[a(i,{binary:!0})])]),_:1}),a(c,{field:"question",header:""})]),_:1},8,["value"])]),_:1})}const bo=v(yo,[["render",vo]]),go={props:["tmp_policy"],components:{DeclarationCard:bo}};function Vo(p,o,t,n,f,u){const i=s("DeclarationCard");return _(),y("div",null,[a(i,{tmp_policy:t.tmp_policy},null,8,["tmp_policy"])])}const xo=v(go,[["render",Vo]]);class Co{static async deleteAttachment(o){return(await R(`/attachments/${o}`)).data}}const $o=E({id:"attachment",state:()=>({attachment:{}}),getters:{},actions:{async deleteAttachment(p){await Co.deleteAttachment(p)}}}),wo={props:{title:String,videoUrl:Boolean},setup(p,o){const t=g(),n=$o(),f=A(),u=g(),i=g(),c=g(),d=b=>{u.value=b.files,t.value||(t.value=[])},r=(b,T)=>{b&&(N(),n.deleteAttachment(b).then(()=>{F(),k(f,{message:"File eliminato correttamente.",title:""}),l(T)}).catch(S=>{F(),B(f,S)}))},l=b=>{t.value.splice(b,1),t.value.length==0&&(t.value=null)},h=b=>{u.value.splice(b,1)},C=()=>t.value&&t.value.length>0?10-t.value.length:10,D=b=>b.type==="image/jpeg";return o.expose({tmp_attachment:t,files:u,fileUpload:i,folder_url:c}),{tmp_attachment:t,files:u,fileUpload:i,folder_url:c,onSelectedFiles:d,deleteImage:r,formatSize:te,deleteGalleryImage:l,deleteFile:h,checkFileLimit:C,checkIsImage:D,getFileName:oe}}};const Do={class:"flex col-10"},To={class:"col-6 flex-column p-0"},Io={key:0},Uo=e("h4",{class:"mb-1 mt-0"},"Pending",-1),So={class:"flex flex-wrap"},zo={class:"flex align-items-center"},ko=["alt","src"],Fo={key:1,class:"pi pi-file text-2xl"},Po={class:"flex flex-column ml-2",style:{"font-size":"12px"}},Lo={class:"mb-1"},Ao={key:0,class:"mb-1 mt-3"},No={class:"flex flex-column"},Bo={key:0,class:"flex align-items-top image mx-2 my-2"},qo=["src"],Ro={key:1,class:"file mr-2"},Eo=["href"],Mo=e("i",{class:"pi pi-file text-2xl mr-2"},null,-1),jo=["onClick"],Go={key:0,class:"text-center"},Ho=e("b",null,"Trascina qui i file.",-1),Oo=e("p",{class:"text-xs"},"(Dimensione massima 2 MB)",-1),Qo=[Ho,Oo];function Zo(p,o,t,n,f,u){const i=s("Button"),c=s("FileUpload"),d=s("Card"),r=M("tooltip");return _(),x(d,{class:"custom-card-form"},{title:m(()=>[V(z(t.title),1)]),content:m(()=>[e("div",Do,[e("div",To,[a(c,{name:"file",url:"https://www.primefaces.org/upload.php",multiple:!0,maxFileSize:2e6,id:"logo",modelValue:n.tmp_attachment,"onUpdate:modelValue":o[0]||(o[0]=l=>n.tmp_attachment=l),customUpload:!0,onSelect:n.onSelectedFiles,fileLimit:n.checkFileLimit(),ref:"fileUpload",disabled:n.tmp_attachment&&n.tmp_attachment.length>=10},{content:m(()=>[n.files&&n.files.length>0?(_(),y("div",Io,[Uo,e("div",So,[(_(!0),y(U,null,L(n.files,(l,h)=>(_(),y("div",{key:l.name+l.type+l.size,class:"card m-0 flex border-1 surface-border align-items-center justify-content-between pl-4 pr-3 py-3 w-full my-2"},[e("div",zo,[n.checkIsImage(l)?(_(),y("img",{key:0,role:"presentation",alt:l.name,src:l.objectURL,width:"50",class:"shadow-2"},null,8,ko)):(_(),y("i",Fo)),e("div",Po,[e("div",Lo,z(l.name),1),e("div",null,z(n.formatSize(l.size)),1)])]),a(i,{icon:"pi pi-times",onClick:C=>n.deleteFile(h),class:"p-button p-component p-button-icon-only p-fileupload-file-remove p-button-text p-button-danger p-button-rounded"},null,8,["onClick"])]))),128))])])):w("",!0),n.tmp_attachment&&n.tmp_attachment[0]&&n.tmp_attachment[0].id?(_(),y(U,{key:1},[n.files&&n.files.length>0?(_(),y("h4",Ao," Completed ")):w("",!0),e("div",No,[(_(!0),y(U,null,L(n.tmp_attachment,(l,h)=>(_(),y(U,{key:l.id},[l&&l.url?(_(),y("div",Bo,[n.checkIsImage(l)?(_(),y("img",{key:0,role:"presentation",class:"p-fileupload-file-thumbnail h-4rem w-7rem",src:l.url,style:{border:"1px solid rgb(0 0 0 / 6%)"}},null,8,qo)):(_(),y("div",Ro,[e("a",{href:l.url,target:"_blank",class:"flex align-items-center"},[Mo,V(z(n.getFileName(l.url)),1)],8,Eo)])),j(e("i",{class:"pi pi-times p-button-icon text-red-600 cursor-pointer font-semibold icon-delete small",onClick:C=>n.deleteImage(l.id,h)},null,8,jo),[[r,"Delete",void 0,{top:!0}]])])):w("",!0)],64))),128))])],64)):w("",!0)]),empty:m(()=>[!n.tmp_attachment||n.tmp_attachment.length==0?(_(),y("div",Go,Qo)):w("",!0)]),_:1},8,["modelValue","onSelect","fileLimit","disabled"])])])]),_:1})}const Wo=v(wo,[["render",Zo]]),Jo={props:["tmp_policy"],components:{UploadAttachmentCard:Wo}};function Ko(p,o,t,n,f,u){const i=s("UploadAttachmentCard"),c=s("Textarea"),d=s("Card");return _(),y("div",null,[a(i,{title:"DOCUMENTI RICHIESTA",videoUrl:!1,ref:"uploadAttachmentCard"},null,512),a(i,{title:"CERTIFICATO POLIZZA",videoUrl:!1,ref:"uploadAttachmentCard1",class:"mt-5"},null,512),a(d,{class:"custom-card-form mt-5"},{title:m(()=>[V(" Note ")]),content:m(()=>[a(c,{rows:"5",cols:"30",class:"w-full"})]),_:1})])}const Xo=v(Jo,[["render",Ko]]),Yo=G({setup(p,o){const t=g({}),n=H(),f=function(i,c,d){n.require({group:"generic",message:c,header:i,acceptLabel:"Conferma",rejectLabel:"Annulla",accept:()=>{d&&d.id?o.emit("confirm-dialog",d.id):o.emit("confirm-dialog")},reject:()=>{u()},acceptClass:"p-button-outlined p-button-rounded",acceptIcon:"pi pi-check"})},u=function(){t.value={},o.emit("close-dialog")};return{confirmDialog:f,resetForm:u}}}),el={class:"field col-12 flex flex-column"},tl=["innerHTML"];function ol(p,o,t,n,f,u){const i=s("ConfirmDialog");return _(),x(i,{group:"generic",style:{"min-width":"28rem","max-width":"51rem"},"aria-label":"popup",id:"confirm",onHide:o[0]||(o[0]=c=>p.resetForm())},{message:m(c=>[e("div",el,[e("div",{innerHTML:c.message.message,class:"line-height-3 mt-3"},null,8,tl)])]),_:1})}const ll=v(Yo,[["render",ol]]),al={props:["policy_id","detail"],setup(p){O(()=>{p.policy_id&&C(p.policy_id)});const o=g({}),t=g(),n=g(!1),f=g();Q();const u=A(),i=J(),c=g(!1),d=K({company:X().required()}),r=g({icon:"pi pi-home",to:"/polizze-partner"}),l=g([{label:"Cofidis"},{label:"234324"}]),h=Z(()=>i.getCurrentPolicy),C=async function($){N(),i.fetchPolicyDetail($).then(()=>{F(),T(),l.value[0]={label:h.value.code+""}}).catch(I=>{F(),B(u,I)})},D=async function(){const I={policy:Object.assign({},o.value)};i.updatePolicy(I).then(()=>{C(h.value.id+""),k(u,{message:"Polizza aggiornata correttamente",title:""})}).catch(rl=>{})},b=async function(){const $={policy:o.value};i.createPolicy($).then(()=>{C(h.value.id+""),k(u,{message:"Utente creato correttamente.",title:""}),W.push({name:"policy-detail",params:{id:h.value.id}})}).catch(I=>{})},T=function(){o.value=Object.assign({},h.value)};return{tmp_policy:o,filteredPolicies:t,schema:d,home:r,items:l,dialogGeneric:f,savePolicy:function(){if(n.value=!0,c.value){k(u,{message:"Controlla di aver inserito i campi obbligatori.",title:"",error:!0});return}o.value.id?D():b(),n.value=!1},validateField:function($){if(n.value)return $==""||$==null?c.value=!0:c.value=!1,c.value},onSubmit:async function($,I){debugger},save:async function(){f.value.confirmDialog("Modifica polizza","Sei sicuro di voler modificare la polizza?")},onConfirmDialog:function(){}}},components:{InputTextWithValidation:ee,Form:Y,InsuredTab:rt,ContractDataTab:Qt,DoctorTab:io,SurveyTab:fo,DeclarationTab:xo,DocumentTab:Xo,DialogGeneric:ll}};const nl={class:"policy"},il={class:"flex align-items-center justify-content-between"},sl=e("h1",null,"Dettaglio polizza",-1);function cl(p,o,t,n,f,u){const i=s("Breadcrumb"),c=s("Button"),d=s("InsuredTab"),r=s("TabPanel"),l=s("ContractDataTab"),h=s("SurveyTab"),C=s("DoctorTab"),D=s("DeclarationTab"),b=s("DocumentTab"),T=s("TabView"),S=s("Form"),P=s("DialogGeneric");return _(),y(U,null,[a(i,{home:n.home,model:n.items,class:"px-0"},null,8,["home","model"]),e("div",nl,[n.tmp_policy?(_(),x(S,{key:0,"validation-schema":n.schema,onSubmit:n.onSubmit,class:"flex flex-column"},{default:m(()=>[e("div",il,[sl,e("div",null,[a(c,{label:"Salva",rounded:"",outlined:"",onClick:n.save},null,8,["onClick"])])]),a(T,{scrollable:!0,class:"custom-tab-view"},{default:m(()=>[a(r,{header:"Assicurato"},{default:m(()=>[a(d,{class:"pt-4",tmp_policy:n.tmp_policy},null,8,["tmp_policy"])]),_:1}),a(r,{header:"Dati contratto"},{default:m(()=>[a(l,{class:"pt-4",tmp_policy:n.tmp_policy},null,8,["tmp_policy"])]),_:1}),a(r,{header:"Questionario"},{default:m(()=>[a(h,{class:"pt-4",tmp_policy:n.tmp_policy},null,8,["tmp_policy"])]),_:1}),a(r,{header:"Medico"},{default:m(()=>[a(C,{class:"pt-4",tmp_policy:n.tmp_policy},null,8,["tmp_policy"])]),_:1}),a(r,{header:"Dichiarazioni"},{default:m(()=>[a(D,{class:"pt-4",tmp_policy:n.tmp_policy},null,8,["tmp_policy"])]),_:1}),a(r,{header:"Documenti"},{default:m(()=>[a(b,{class:"pt-4",tmp_policy:n.tmp_policy},null,8,["tmp_policy"])]),_:1})]),_:1})]),_:1},8,["validation-schema","onSubmit"])):w("",!0)]),a(P,{ref:"dialogGeneric",onConfirmDialog:o[0]||(o[0]=q=>n.onConfirmDialog())},null,512)],64)}const vl=v(al,[["render",cl]]);export{vl as default};
