import{d as M,s as $,o as C,c as P,w as r,i as y,u as S,a as i,b as h,e,k as u,t as d,f,h as T,j as k,T as B,r as E,p as F,R as x}from"../index49648.js";import{u as N,_ as O,s as L}from"./LazyDataTable.vue_vue_type_script_setup_true_lang49648.js";import{u as R}from"./flow49648.js";import{_ as V}from"./AppBack.vue_vue_type_script_setup_true_lang49648.js";import"./index496482.js";import"./index49648.js";const j={key:0},I={key:1},W={key:2},A={class:"flex items-center justify-center"},g=10,H=M({__name:"PracticesTable",props:{flow_id:{}},setup(p){const n=p,c=S(),o=R(),{practices:_}=$(o),{loadLazyData:m,isLoading:w}=N({rows:g},v),b=function(s){return{path:`${c.path}/${s}`}};async function v(s){try{await o.fetchFlowDetail(n.flow_id)}catch(a){console.error(a)}}return C(()=>{m()}),(s,a)=>{const l=L,D=k,z=B;return i(),P(O,{value:y(_),loading:y(w),rows:g,"data-key":"id",scrollable:"",showFilterRow:!1,showPagination:!1},{empty:r(()=>a[0]||(a[0]=[h("Non ci sono pratiche")])),default:r(()=>[e(l,{header:"Contratto di finanziamento",field:"financing_contract_number",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1}),e(l,{header:"Stato pratica",field:"practice_status",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{body:r(({data:t})=>[t.practice_status==="e"?(i(),u("span",j,"Emessa")):t.practice_status==="x"?(i(),u("span",I,"Sospesa")):(i(),u("span",W,d(t.practice_status),1))]),_:1}),e(l,{header:"Premio",field:"policy_premium",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{body:r(({data:t})=>[h(d(t.policy_premium)+" â‚¬ ",1)]),_:1}),e(l,{header:"Conferma di adesione",field:"subscription_number",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{body:r(({data:t})=>[h(d(t.subscription_number),1)]),_:1}),e(l,{class:"w-[50px]","align-frozen":"right",frozen:""},{body:r(({data:t})=>[f("div",A,[T(e(D,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",icon:"pi pi-arrow-right",text:"",rounded:"",as:"router-link",to:b(t.id)},null,8,["to"]),[[z,"Dettagli",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading"])}}}),q={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4"},G={class:"flex gap-2"},Z=M({__name:"PracticesView",props:{flow_id:{}},setup(p){const n=p,c=R(),o=E(!1),_=F(()=>({name:x.PRATICHE_NEW})),m=F(()=>({name:x.FLOWS_EDIT}));async function w(){try{o.value=!0,await c.exportFlow(n.flow_id)}finally{o.value=!1}}return(b,v)=>{var a;const s=k;return i(),u("div",null,[e(V,{title:"Flussi",url:"/flows"}),f("div",q,[f("h3",null,"Flusso "+d((a=y(c).currentFlow)==null?void 0:a.code),1),f("div",G,[e(s,{label:"Esporta flusso",variant:"outlined",severity:"contrast",rounded:"",size:"small",loading:o.value,disabled:o.value,onClick:w},null,8,["loading","disabled"]),e(s,{label:"Modifica flusso",as:"router-link",to:m.value,variant:"outlined",severity:"contrast",rounded:"",size:"small"},null,8,["to"]),e(s,{label:"Inserisci pratica",as:"router-link",to:_.value,variant:"outlined",severity:"contrast",rounded:"",size:"small"},null,8,["to"])])]),e(H,{flow_id:n.flow_id},null,8,["flow_id"])])}}});export{Z as default};
