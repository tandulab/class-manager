<<<<<<<< HEAD:assets/UsersView71670.js
import{d as L,s as b,r as E,o as X,c as y,w as s,i as n,u as T,a as d,b as h,f as i,e as a,n as x,v as V,t as p,g as K,h as Y,j as Z,T as ee,p as te,k as P,F as ae}from"../index71670.js";import{s as oe}from"./index71670.js";import{T as u,u as se,_ as ne,s as le}from"./LazyDataTable.vue_vue_type_script_setup_true_lang71670.js";import{s as re}from"./index716702.js";import{u as N,_ as ie}from"./RoleCard.vue_vue_type_script_setup_true_lang71670.js";import{u as R}from"./partner71670.js";import{u as ue}from"./useRole71670.js";import{_ as ce}from"./AppBack.vue_vue_type_script_setup_true_lang71670.js";const de={class:"flex items-center gap-x-2"},pe={class:"flex items-center gap-x-2"},me={class:"flex items-center gap-x-2"},fe={class:"flex items-center gap-x-2"},ve={class:"flex items-center justify-center"},S=10,he=L({__name:"UserTable",props:{partnerId:{}},setup(g){const l=g,_=N(),m=R(),{roles:F,isAdmin:U}=ue(),{users:k,totalUsers:D}=b(_),{allPartners:z}=b(m),$=E(!1),w=E({id:{value:"",matchMode:u.EQ},email:{value:"",matchMode:u.LIKE},role:{value:"",matchMode:u.EQ},first_name:{value:"",matchMode:u.LIKE},last_name:{value:"",matchMode:u.LIKE},partner_id:{value:"",matchMode:u.EQ},full_name:{value:"",matchMode:u.LIKE}}),B=T(),{onSort:O,onPage:j,onFilter:Q,loadLazyData:A,isLoading:q}=se({rows:S},G);function I(){Q(w.value)}async function G(c){try{await _.fetchUsers(c)}catch(r){console.error(r)}}async function H(){try{$.value=!0,await m.fetchPartners()}catch(c){console.error(c)}finally{$.value=!1}}const J=function(c){return{path:`${B.path}/${c}`}};return X(()=>{l.partnerId?(w.value.partner_id.value=l.partnerId,I()):A(),U.value&&H()}),(c,r)=>{const M=re,f=Z,v=le,C=oe,W=ee;return d(),y(ne,{value:n(k),rows:S,"total-records":n(D),onSort:n(O),onPage:n(j),onFilter:I,filters:w.value,"onUpdate:filters":r[0]||(r[0]=e=>w.value=e),"data-key":"id",scrollable:"",loading:n(q)},{empty:s(()=>r[2]||(r[2]=[h("Non ci sono utenti")])),default:s(()=>[n(U)?(d(),y(v,{key:0,class:"min-w-[150px]",header:"Partner",field:"partner_id",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:s(({filterModel:e,filterCallback:t})=>[i("div",de,[a(M,{class:"w-[150px]",modelValue:e.value,"onUpdate:modelValue":[o=>e.value=o,t],options:n(z),"option-label":"name","option-value":"id",loading:$.value,disabled:!!l.partnerId},{empty:s(()=>r[1]||(r[1]=[h("Non ci sono partner")])),_:2},1032,["modelValue","onUpdate:modelValue","options","loading","disabled"]),l.partnerId?V("",!0):(d(),y(f,{key:0,class:x(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:o=>{e.value="",t()}},null,8,["class","onClick"]))])]),body:s(({data:e})=>{var t;return[h(p((t=e.partner)==null?void 0:t.name),1)]}),_:1})):V("",!0),a(v,{class:"min-w-[200px]",header:"Email",field:"email",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:s(({filterModel:e,filterCallback:t})=>[i("div",pe,[a(C,{fluid:"",modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,type:"text",placeholder:"Filtra",onKeydown:K(o=>t(),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),a(f,{class:x(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:o=>{e.value="",t()}},null,8,["class","onClick"])])]),_:1}),a(v,{class:"min-w-[200px]","filter-field":"full_name",header:"Nome",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:s(({filterModel:e,filterCallback:t})=>[i("div",me,[a(C,{fluid:"",modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,type:"text",placeholder:"Filtra",onKeydown:K(o=>t(),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),a(f,{class:x(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:o=>{e.value="",t()}},null,8,["class","onClick"])])]),body:s(({data:e})=>[h(p(e.first_name)+" "+p(e.last_name),1)]),_:1}),a(v,{class:"min-w-[100px]",header:"Ruolo",field:"role",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:s(({filterModel:e,filterCallback:t})=>[i("div",fe,[a(M,{class:"w-[100px]",modelValue:e.value,"onUpdate:modelValue":[o=>e.value=o,t],options:n(F),"option-label":"label","option-value":"value"},null,8,["modelValue","onUpdate:modelValue","options"]),a(f,{class:x(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:o=>{e.value="",t()}},null,8,["class","onClick"])])]),body:s(({data:e})=>[a(ie,{role:e.role},null,8,["role"])]),_:1}),a(v,{class:"w-[50px]","align-frozen":"right",frozen:""},{body:s(({data:e})=>[i("div",ve,[Y(a(f,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",icon:"pi pi-arrow-right",text:"",rounded:"",as:"router-link",to:J(e.id)},null,8,["to"]),[[W,"Dettagli",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","total-records","onSort","onPage","filters","loading"])}}}),_e={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4"},we={key:0},ke=L({__name:"UsersView",props:{partnerId:{}},setup(g){const l=g,_=T();te(()=>({path:`${_.path}/new`}));const{total_records:m}=b(N()),{partnerRoute:F}=b(R());return(U,k)=>(d(),P(ae,null,[l.partnerId?(d(),y(ce,{key:0,title:"Utenti partner",url:"/utenti/partner"})):V("",!0),i("div",null,[i("div",_e,[i("h3",null,[h(p(n(m))+" "+p(n(m)==1?"Utente":"Utenti")+" ",1),l.partnerId?(d(),P("span",we," - Partner "+p(n(F).name),1)):V("",!0)])]),a(he,{"partner-id":l.partnerId},null,8,["partner-id"])])],64))}});export{ke as default};
========
import{d as L,s as b,r as E,o as X,c as y,w as s,i as n,u as T,a as d,b as h,f as i,e as a,n as x,v as V,t as p,g as K,h as Y,j as Z,T as ee,p as te,k as P,F as ae}from"../index81571.js";import{s as oe}from"./index81571.js";import{T as u,u as se,_ as ne,s as le}from"./LazyDataTable.vue_vue_type_script_setup_true_lang81571.js";import{s as re}from"./index815712.js";import{u as N,_ as ie}from"./RoleCard.vue_vue_type_script_setup_true_lang81571.js";import{u as R}from"./partner81571.js";import{u as ue}from"./useRole81571.js";import{_ as ce}from"./AppBack.vue_vue_type_script_setup_true_lang81571.js";const de={class:"flex items-center gap-x-2"},pe={class:"flex items-center gap-x-2"},me={class:"flex items-center gap-x-2"},fe={class:"flex items-center gap-x-2"},ve={class:"flex items-center justify-center"},S=10,he=L({__name:"UserTable",props:{partnerId:{}},setup(g){const l=g,_=N(),m=R(),{roles:F,isAdmin:U}=ue(),{users:k,totalUsers:D}=b(_),{allPartners:z}=b(m),$=E(!1),w=E({id:{value:"",matchMode:u.EQ},email:{value:"",matchMode:u.LIKE},role:{value:"",matchMode:u.EQ},first_name:{value:"",matchMode:u.LIKE},last_name:{value:"",matchMode:u.LIKE},partner_id:{value:"",matchMode:u.EQ},full_name:{value:"",matchMode:u.LIKE}}),B=T(),{onSort:O,onPage:j,onFilter:Q,loadLazyData:A,isLoading:q}=se({rows:S},G);function I(){Q(w.value)}async function G(c){try{await _.fetchUsers(c)}catch(r){console.error(r)}}async function H(){try{$.value=!0,await m.fetchPartners()}catch(c){console.error(c)}finally{$.value=!1}}const J=function(c){return{path:`${B.path}/${c}`}};return X(()=>{l.partnerId?(w.value.partner_id.value=l.partnerId,I()):A(),U.value&&H()}),(c,r)=>{const M=re,f=Z,v=le,C=oe,W=ee;return d(),y(ne,{value:n(k),rows:S,"total-records":n(D),onSort:n(O),onPage:n(j),onFilter:I,filters:w.value,"onUpdate:filters":r[0]||(r[0]=e=>w.value=e),"data-key":"id",scrollable:"",loading:n(q)},{empty:s(()=>r[2]||(r[2]=[h("Non ci sono utenti")])),default:s(()=>[n(U)?(d(),y(v,{key:0,class:"min-w-[150px]",header:"Partner",field:"partner_id",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:s(({filterModel:e,filterCallback:t})=>[i("div",de,[a(M,{class:"w-[150px]",modelValue:e.value,"onUpdate:modelValue":[o=>e.value=o,t],options:n(z),"option-label":"name","option-value":"id",loading:$.value,disabled:!!l.partnerId},{empty:s(()=>r[1]||(r[1]=[h("Non ci sono partner")])),_:2},1032,["modelValue","onUpdate:modelValue","options","loading","disabled"]),l.partnerId?V("",!0):(d(),y(f,{key:0,class:x(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:o=>{e.value="",t()}},null,8,["class","onClick"]))])]),body:s(({data:e})=>{var t;return[h(p((t=e.partner)==null?void 0:t.name),1)]}),_:1})):V("",!0),a(v,{class:"min-w-[200px]",header:"Email",field:"email",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:s(({filterModel:e,filterCallback:t})=>[i("div",pe,[a(C,{fluid:"",modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,type:"text",placeholder:"Filtra",onKeydown:K(o=>t(),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),a(f,{class:x(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:o=>{e.value="",t()}},null,8,["class","onClick"])])]),_:1}),a(v,{class:"min-w-[200px]","filter-field":"full_name",header:"Nome",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:s(({filterModel:e,filterCallback:t})=>[i("div",me,[a(C,{fluid:"",modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,type:"text",placeholder:"Filtra",onKeydown:K(o=>t(),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),a(f,{class:x(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:o=>{e.value="",t()}},null,8,["class","onClick"])])]),body:s(({data:e})=>[h(p(e.first_name)+" "+p(e.last_name),1)]),_:1}),a(v,{class:"min-w-[100px]",header:"Ruolo",field:"role",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:s(({filterModel:e,filterCallback:t})=>[i("div",fe,[a(M,{class:"w-[100px]",modelValue:e.value,"onUpdate:modelValue":[o=>e.value=o,t],options:n(F),"option-label":"label","option-value":"value"},null,8,["modelValue","onUpdate:modelValue","options"]),a(f,{class:x(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:o=>{e.value="",t()}},null,8,["class","onClick"])])]),body:s(({data:e})=>[a(ie,{role:e.role},null,8,["role"])]),_:1}),a(v,{class:"w-[50px]","align-frozen":"right",frozen:""},{body:s(({data:e})=>[i("div",ve,[Y(a(f,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",icon:"pi pi-arrow-right",text:"",rounded:"",as:"router-link",to:J(e.id)},null,8,["to"]),[[W,"Dettagli",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","total-records","onSort","onPage","filters","loading"])}}}),_e={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4"},we={key:0},ke=L({__name:"UsersView",props:{partnerId:{}},setup(g){const l=g,_=T();te(()=>({path:`${_.path}/new`}));const{total_records:m}=b(N()),{partnerRoute:F}=b(R());return(U,k)=>(d(),P(ae,null,[l.partnerId?(d(),y(ce,{key:0,title:"Utenti partner",url:"/utenti/partner"})):V("",!0),i("div",null,[i("div",_e,[i("h3",null,[h(p(n(m))+" "+p(n(m)==1?"Utente":"Utenti")+" ",1),l.partnerId?(d(),P("span",we," - Partner "+p(n(F).name),1)):V("",!0)])]),a(he,{"partner-id":l.partnerId},null,8,["partner-id"])])],64))}});export{ke as default};
>>>>>>>> 77b4e6425207416f84c821f9ea569f0463b06a11:assets/UsersView81571.js
